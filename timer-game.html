<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Website</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Zalando+Sans+Expanded:ital,wght@0,200..900;1,200..900&display=swap"
        rel="stylesheet">
    <!-- Animated Theme CSS -->
    <link rel="stylesheet" href="CSS/timer-game.css" id="timer-game-animated">
    <link rel="stylesheet" href="CSS/buttons.css" id="buttons-animated">
    <!-- Static Theme CSS -->
    <link rel="stylesheet" href="CSS/static/timer-game-static.css" id="timer-game-static" disabled>
    <link rel="stylesheet" href="CSS/static/buttons-static.css" id="buttons-static" disabled>
    <!-- Flow Theme CSS -->
    <link rel="stylesheet" href="CSS/flow/timer-game-flow.css" id="timer-game-flow" disabled>
    <link rel="stylesheet" href="CSS/flow/buttons-flow.css" id="buttons-flow" disabled>
    <link rel="stylesheet" href="CSS/flow/flow-bg.css" id="flow-bg-css" disabled>
</head>

<body>

    <div class="game-container">
        <div class="header">
            <h1 class="title">Timer Game</h1>
            <p class="subtitle">Test your reaction time!</p>
        </div>

        <div class="controls">
            <div class="score-board">
                <div class="score-label">Score</div>
                <div class="score">0</div>
            </div>

            <div class="difficulty-selector">
                <button class="difficulty-btn active">Easy</button>
                <button class="difficulty-btn">Medium</button>
                <button class="difficulty-btn">Hard</button>
                <button class="difficulty-btn">Extreme</button>
                <button class="difficulty-btn">Nightmare</button>
                <button class="difficulty-btn">Master</button>
            </div>
        </div>

        <div class="game-area">
            <button class="click-button">Start</button>
        </div>

        <p class="instructions">The button will move when you hover over it, try to click it before it escapes!</p>
    </div>

    <canvas id="flow-bg" style="display: none;"></canvas>

    <button id="main">Return To Homepage</button>

    <script src="Javascript/Javascript-linking/timer-game_link.js"></script>
    <script src="Javascript/timer-game.js"></script>
    <script>
        const savedTheme = localStorage.getItem('theme') || 'animated';
        const flowBgCss = document.getElementById('flow-bg-css');
        const flowCanvas = document.getElementById('flow-bg');

        if (savedTheme === 'static') {
            document.getElementById('timer-game-animated').disabled = true;
            document.getElementById('buttons-animated').disabled = true;
            document.getElementById('timer-game-static').disabled = false;
            document.getElementById('buttons-static').disabled = false;
            document.getElementById('timer-game-flow').disabled = true;
            document.getElementById('buttons-flow').disabled = true;
            if (flowBgCss) flowBgCss.disabled = true;
            if (flowCanvas) flowCanvas.style.display = 'none';
        } else if (savedTheme === 'flow') {
            document.getElementById('timer-game-animated').disabled = true;
            document.getElementById('buttons-animated').disabled = true;
            document.getElementById('timer-game-static').disabled = true;
            document.getElementById('buttons-static').disabled = true;
            document.getElementById('timer-game-flow').disabled = false;
            document.getElementById('buttons-flow').disabled = false;
            if (flowBgCss) flowBgCss.disabled = false;
            if (flowCanvas) flowCanvas.style.display = 'block';
        } else {
            if (flowBgCss) flowBgCss.disabled = true;
            if (flowCanvas) flowCanvas.style.display = 'none';
        }

        // Flow animation code
        const canvas = document.getElementById('flow-bg');
        if (canvas) {
            const ctx = canvas.getContext('2d');
            let canvasWidth, canvasHeight;
            let flowingLines = [];
            let isInitialized = false;

            function initializeCanvas() {
                canvasWidth = window.innerWidth;
                canvasHeight = Math.max(document.documentElement.scrollHeight, window.innerHeight);
                canvas.width = canvasWidth;
                canvas.height = canvasHeight;
                flowingLines = [];
                const screenDiagonal = Math.sqrt(canvasWidth * canvasWidth + canvasHeight * canvasHeight);
                const maxDistanceFromCenter = screenDiagonal / 2;
                for (let i = 0; i < 5000; i++) {
                    const randomValue = Math.random();
                    const pushTowardsEdge = Math.pow(randomValue, 0.4);
                    const distanceFromCenter = pushTowardsEdge * maxDistanceFromCenter;
                    const startingAngle = Math.random() * 6.28;
                    const rotationSpeed = 0.001 + Math.random() * 0.003;
                    const opacity = 0.2 + Math.random() * 0.3;
                    flowingLines.push({ angle: startingAngle, radius: distanceFromCenter, speed: rotationSpeed, opacity: opacity });
                }
                ctx.fillStyle = 'black';
                ctx.fillRect(0, 0, canvasWidth, canvasHeight);
                isInitialized = true;
            }

            window.addEventListener('resize', function () {
                if (canvas.style.display !== 'none') initializeCanvas();
            });

            function animateLines() {
                if (!isInitialized || canvas.style.display === 'none') {
                    requestAnimationFrame(animateLines);
                    return;
                }
                ctx.fillStyle = 'rgba(0,0,0,0.08)';
                ctx.fillRect(0, 0, canvasWidth, canvasHeight);
                const centerX = canvasWidth / 2;
                const centerY = canvasHeight / 2;
                for (let i = 0; i < flowingLines.length; i++) {
                    const line = flowingLines[i];
                    line.angle = line.angle + line.speed;
                    const lineX = centerX + Math.cos(line.angle) * line.radius;
                    const lineY = centerY + Math.sin(line.angle) * line.radius;
                    const lineDirection = line.angle + 1.57;
                    const lineLength = 21;
                    const endX = lineX + Math.cos(lineDirection) * lineLength;
                    const endY = lineY + Math.sin(lineDirection) * lineLength;
                    ctx.strokeStyle = 'rgba(255,255,255,' + line.opacity + ')';
                    ctx.lineWidth = 0.8;
                    ctx.beginPath();
                    ctx.moveTo(lineX, lineY);
                    ctx.lineTo(endX, endY);
                    ctx.stroke();
                }
                requestAnimationFrame(animateLines);
            }

            if (savedTheme === 'flow') initializeCanvas();
            animateLines();
        }
    </script>

</body>